---
Author: FallingMY
Date: 2026-2-10 00:31
Version: 1.0
---

# 基于python的Obs计时脚本

本程序用于通过生成并实时修改`OUTPUT.txt`文本文件从而使obs可以通过读取此文件并显示其中的文本内容从而实现计时效果。

## 运行流程

1. Initialize: 无命令行参数输入：显示TUI界面，指导用户选择模式以及输入相关参数；有命令行参数输入：通过命令行参数直接进入**Run**阶段。
2. Run: 根据输入的参数以及相关配置要求修改`./OUTPUT.txt`的内容。
3. Interrupt: 在**Run**的过程中侦测按键，若按下对应按键/组合键则执行相应操作。
4. Stop: 当**Run**运行结束时，停止修改文本，并在终端输出通知。

## 相关参数

### mode

接受一个整形，用于指定计时方式，必要参数

- **0**：倒计时，输入具体的时间点，程序自动计算距离时间点的剩余时间。
- **1**：倒计时，输入要倒计时的时间长度。
- **2**：正计时，从程序开始运行时开始计算。

### time

接受一个字符串，用于指定时间,必要参数

- `xx`：秒数(0<=)
- `xx:xx`：冒号前为分钟数(0<=)，冒号后为秒数(0<=,<60)
- `xx:xx:xx`：由冒号分隔，分别为小时(0<=)、分钟(0<=,<60)、秒数(0<=,<60)

### date

接受一个字符串，用于指定日期，可选参数

- `null`：当前日期
- `xx/xx`：月份/日期，年份默认为当年
- `xxxx/xx/xx`：年份/月份/日期

### display

接受一个整形，用于指定倒计时的格式，可选参数，默认为0

- **0**：保持输出格式最短，即当某一个单位的数字为0时不再显示该单位以及与低位单位中的间隔冒号，并且不保留小时和分钟位的最高位0（即显示4而不是04）。例如剩余四分三秒时应输出：`4:03`。
- **1**：保持输出格式最短，即当某一个单位的数字为0时不再显示该单位,但是保留除了小时的其余时间单位的最高位0。例如剩余一小时四分三秒时应输出：`1:04:03`。
- **2**：保持完整格式，即每个单位最少为两位数字。例如剩余一小时四分三秒时应输出：`01:04:03`。

## 按键监听

当在运行时按下以下按键或组合键时，触发相应的功能

- r: 重新开始当前计时。按下后要求二次确认：按下y/n
- p: 暂停计时(对计时到具体时间点的模式0无效)
- q: 退出计时，回到初始化状态。按下后要求二次确认：按下y/n